CLAPACK=base
ADDITIONAL=additional

all: install

install:
	mkdir -p build
	cd $(CLAPACK) && $(MAKE) blaslib
	cd $(CLAPACK) && $(MAKE) f2clib
	cd $(ADDITIONAL) && gcc -c -fPIC *.c && ar cr ../build/minlibdgels.a *.o && ranlib ../build/minlibdgels.a

clean:
	cd $(CLAPACK) && $(MAKE) clean && rm -rf *~
	cd $(ADDITIONAL) && rm -rf *.o *~
	rm -rf build *~

distclean: clean

# This part is needed by StarPU

STARPU_SRCDIR = @srcdir@

distdir:
	cp -fRp $(STARPU_SRCDIR)/* $(distdir)
	cd $(distdir) && cp Makefile.in Makefile && make clean && rm -rf Makefile

check: install
	echo "No checks are implemented for min-dgels"
