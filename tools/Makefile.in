#
# StarPU
# Copyright (C) INRIA 2008-2009 (see AUTHORS file)
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License as published by
# the Free Software Foundation; either version 2.1 of the License, or (at
# your option) any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
#
# See the GNU Lesser General Public License in COPYING.LGPL for more details.
#

TOOLS=

ifeq (@USE_FXT@,yes)
	TOOLS += fxt-tool fxt-stats 
endif

ifdef FLASH_RENDER
	DEPS +=  histo-flash.o
	LDFLAGS+= -lming
endif

CFLAGS+= -I../ -I../src/

all: $(TOOLS)

%.o: %.c
	$(CC) $(CFLAGS) $< -c -o $@

fxt-stats: $(DEPS) fxt-stats.o
	$(CC) $(LDFLAGS) $(DEPS) fxt-stats.o -o fxt-stats

fxt-tool: $(DEPS) fxt-tool.o histo-svg.o dag-dot.o gtk-viewer.o histo-paje.o
	$(CC) $(LDFLAGS) @GTK_LIBS@ $(DEPS) gtk-viewer.o dag-dot.o histo-svg.o fxt-tool.o histo-paje.o -o fxt-tool

gtk-viewer.o: gtk-viewer.c
	$(CC) $(CFLAGS) @GTK_CFLAGS@ gtk-viewer.c -c -o gtk-viewer.o

clean:
	@rm -f *.o *.gcda *.gcno
	@rm -f fxt-tool fxt-stats
